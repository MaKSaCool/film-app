(this["webpackJsonpfilm-app"]=this["webpackJsonpfilm-app"]||[]).push([[0],{20:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),i=n.n(c),s=n(10),r=n.n(s),o=n(12),l=n(9),h=n.n(l),u=n(11),j=n(3),d=n(4),b=n(2),v=n(6),m=n(5),p="https://api.themoviedb.org/3",O="48a55341b8a1c6f4afbaa375a34a6a3a",f=(n(8),function(e){Object(v.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).newState=1===a.props.willWatch.filter((function(e){return e.id===a.props.film.id})).length,a.state={willWatch:a.newState},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.film,c=t.onDeleteMovie,i=t.onMovieToWatch,s=t.onMovieFromWatch;return Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("img",{className:"card-img-top",src:"https://image.tmdb.org/t/p/w500".concat(n.backdrop_path||n.poster_path),alt:n.title}),Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("h6",{className:"card-title",children:n.title}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(a.jsxs)("p",{className:"mb-0",children:["Rating: ",n.vote_average]}),Object(a.jsxs)("div",{className:"dflex justify-content-between align-items-center",children:[!0===this.state.willWatch?Object(a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){e.setState({willWatch:!1}),s(n)},children:"Clear Watch"}):Object(a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){e.setState({willWatch:!0}),i(n)},children:"Will Watch"}),Object(a.jsx)("button",{type:"button",className:"btn btn-secondary ml-3",onClick:function(){return c(n.id)},children:"Delete Movie"})]})]})]})]})}}]),n}(i.a.Component)),g=function(e){Object(v.a)(n,e);var t=Object(m.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.movies,n=e.willWatch,c=e.onDeleteMovie,i=e.onMovieToWatch,s=e.onMovieFromWatch;return Object(a.jsx)("div",{className:"row",children:t.map((function(e){return Object(a.jsx)("div",{className:"col-6 mb-4",children:Object(a.jsx)(f,{film:e,willWatch:n,onDeleteMovie:c,onMovieToWatch:i,onMovieFromWatch:s})},e.id)}))})}}]),n}(i.a.Component),y=function(e){Object(v.a)(n,e);var t=Object(m.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.movie;return Object(a.jsx)("li",{className:"list-group-item",children:Object(a.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(a.jsx)("h6",{className:"mb-0",children:e.title}),Object(a.jsx)("p",{className:"mb-0",children:e.vote_average})]})})}}]),n}(i.a.Component),k=function(e){Object(v.a)(n,e);var t=Object(m.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return e.movies!==this.props.movies}},{key:"render",value:function(){var e=this.props.movies;return Object(a.jsxs)("div",{className:"col-3 sticky-top height-ft",children:[Object(a.jsxs)("h5",{children:[" Will watch: ",e.length," "]}),Object(a.jsx)("ul",{className:"list-group",children:e.map((function(e){return Object(a.jsx)(y,{movie:e},e.id)}))})]})}}]),n}(i.a.Component),x=function(e){Object(v.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(b.a)(a)),a.getClass=a.getClass.bind(Object(b.a)(a)),a}return Object(d.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return e.sortBy!==this.props.sortBy}},{key:"handleClick",value:function(e){var t=this;return function(n){t.props.onChangeSortBy(e,n)}}},{key:"getClass",value:function(e){return"nav-link ".concat(this.props.sortBy===e?"active":"")}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"col-12",children:Object(a.jsxs)("ul",{className:"tabs nav nav-pills",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{href:"#",className:this.getClass("popularity.desc"),onClick:this.handleClick("popularity.desc"),children:"Popularity desc"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{href:"#",className:this.getClass("revenue.desc"),onClick:this.handleClick("revenue.desc"),children:"Revenue desc"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{href:"#",className:this.getClass("vote_count.desc"),onClick:this.handleClick("vote_count.desc"),children:"Vote count desc"})})]})})}}]),n}(i.a.Component),C=function(e){Object(v.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).getClass=a.getClass.bind(Object(b.a)(a)),a.handleClick=a.handleClick.bind(Object(b.a)(a)),a}return Object(d.a)(n,[{key:"handleClick",value:function(e){var t=this;return function(n){t.props.onChangePage(e,n)}}},{key:"getClass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"page-item ".concat(this.props.pages.currentPage===e?"disabled":"")}},{key:"render",value:function(){var e=this.props.pages,t=e.currentPage,n=e.totalPages;return Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{className:"pagination justify-content-center align-items-center",children:[Object(a.jsx)("li",{className:this.getClass(),onClick:this.handleClick(!1),children:Object(a.jsx)("a",{className:"page-link",href:"#",children:"Previous"})}),Object(a.jsxs)("li",{className:"page-item numeric-list",children:[t," / ",n]}),Object(a.jsx)("li",{className:this.getClass(n),onClick:this.handleClick(!0),children:Object(a.jsx)("a",{className:"page-link",href:"#",children:"Next"})})]})})})})}}]),n}(i.a.Component),N=function(e){Object(v.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={movies:[],willWatch:[],sortBy:"popularity.desc",currentPage:1,totalPages:1},a.onDeleteMovie=a.onDeleteMovie.bind(Object(b.a)(a)),a.onMovieToWatch=a.onMovieToWatch.bind(Object(b.a)(a)),a.onMovieFromWatch=a.onMovieFromWatch.bind(Object(b.a)(a)),a.onChangeSortBy=a.onChangeSortBy.bind(Object(b.a)(a)),a.makeFetch=a.makeFetch.bind(Object(b.a)(a)),a.onChangePage=a.onChangePage.bind(Object(b.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.makeFetch(this.state.sortBy)}},{key:"componentDidUpdate",value:function(e,t){t.sortBy!==this.state.sortBy&&this.makeFetch(this.state.sortBy),t.currentPage!==this.state.currentPage&&this.makeFetch(this.state.sortBy,this.state.currentPage)}},{key:"makeFetch",value:function(){var e=Object(u.a)(h.a.mark((function e(t){var n,a=this,c=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:1,e.next=3,fetch("".concat(p,"/discover/movie/?api_key=").concat(O,"&sort_by=").concat(t,"&page=").concat(n)).then((function(e){return e.json()})).then((function(e){a.setState({movies:e.results,totalPages:e.total_pages})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onDeleteMovie",value:function(e){this.setState((function(t){var n=t.movies,a=t.willWatch;return{movies:n.filter((function(t){return t.id!==e})),willWatch:a.filter((function(t){return t.id!==e}))}}))}},{key:"onMovieToWatch",value:function(e){0===this.state.willWatch.filter((function(t){return t.id===e.id})).length&&this.setState((function(t){var n=t.willWatch;return{willWatch:[].concat(Object(o.a)(n),[e])}}))}},{key:"onMovieFromWatch",value:function(e){this.setState((function(t){return{willWatch:t.willWatch.filter((function(t){return t.id!==e.id}))}}))}},{key:"onChangeSortBy",value:function(e,t){t.preventDefault(),this.setState({sortBy:e,currentPage:1})}},{key:"onChangePage",value:function(e,t){t.preventDefault();var n=this.state,a=n.currentPage,c=n.totalPages;if(!(1===a&&!e||a===c&&e)){var i=e?a+1:a-1;this.setState({currentPage:i})}}},{key:"render",value:function(){var e=this.state,t=e.movies,n=e.willWatch,c=e.sortBy,i=e.currentPage,s=e.totalPages;return Object(a.jsx)("div",{className:"container pt-3",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-9",children:[Object(a.jsx)("div",{className:"row mb-3",children:Object(a.jsx)(x,{sortBy:c,onChangeSortBy:this.onChangeSortBy})}),Object(a.jsx)(g,{movies:t,willWatch:n,onDeleteMovie:this.onDeleteMovie,onMovieToWatch:this.onMovieToWatch,onMovieFromWatch:this.onMovieFromWatch}),Object(a.jsx)(C,{pages:{currentPage:i,totalPages:s},onChangePage:this.onChangePage})]}),Object(a.jsx)(k,{movies:n})]})})}}]),n}(i.a.Component);n(19);r.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(N,{})}),document.getElementById("root"))},8:function(e,t,n){}},[[20,1,2]]]);
//# sourceMappingURL=main.cfe70053.chunk.js.map